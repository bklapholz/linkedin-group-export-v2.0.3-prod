import"./modulepreload-polyfill.c7c6310f.js";import{d as Te,h as f,H as Ie,o as R,c as M,a as h,k as V,u as r,n as j,F as ae,I as $e,r as z,z as He,v as Le,s as Me,x as Oe,y as Ve,b as _,J as _e,K as Ae,L as ze,i as Ce,M as ve,N as Ne,l as Se,O as Be,g as je,P as Ge,w as pe,j as Qe,q as xe,Q as fe,e as W,t as B,p as Ke,R as ne,S as Ue,_ as Ze,T as Je,U as We,A as Ye,B as Xe,C as et,E as tt,G as nt}from"./__uno.d4f98f23.js";const at=Te({__name:"App",setup(e){let{on:t,clear:a}=$e(),o=f(!1),l=f(!1),c=f(!1),d=f(!1),i=f(!1);return t("popup",({name:s})=>{switch(s){case"History":o.value=!0;break;case"Setting":l.value=!0;break;case"Help":c.value=!0;break;case"Tool":d.value=!0;break;case"Pro":i.value=!0;break}}),Ie(()=>{a()}),(s,n)=>{const k=z("router-view"),g=He,v=z("a-modal"),T=Le,x=Me,m=Oe,p=Ve;return R(),M(ae,null,[h(k),h(v,{visible:r(o),"onUpdate:visible":n[0]||(n[0]=u=>j(o)?o.value=u:o=u),title:"History",footer:null,destroyOnClose:"",bodyStyle:{padding:0}},{default:V(()=>[h(g)]),_:1},8,["visible"]),h(v,{visible:r(l),"onUpdate:visible":n[1]||(n[1]=u=>j(l)?l.value=u:l=u),title:"Settings",footer:null,destroyOnClose:""},{default:V(()=>[h(T)]),_:1},8,["visible"]),h(v,{visible:r(c),"onUpdate:visible":n[2]||(n[2]=u=>j(c)?c.value=u:c=u),title:"Help",footer:null},{default:V(()=>[h(x)]),_:1},8,["visible"]),h(v,{visible:r(d),"onUpdate:visible":n[3]||(n[3]=u=>j(d)?d.value=u:d=u),title:"More Tools",footer:null},{default:V(()=>[h(m)]),_:1},8,["visible"]),h(v,{visible:r(i),"onUpdate:visible":n[4]||(n[4]=u=>j(i)?i.value=u:i=u),title:"VIP",footer:null},{default:V(()=>[h(p)]),_:1},8,["visible"])],64)}}}),st={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ot=_("path",{fill:"currentColor",d:"M12 15.575q-.2 0-.375-.063q-.175-.062-.325-.212l-3.6-3.6q-.275-.275-.275-.7q0-.425.275-.7q.275-.275.712-.288q.438-.012.713.263L11 12.15V5q0-.425.288-.713Q11.575 4 12 4t.713.287Q13 4.575 13 5v7.15l1.875-1.875q.275-.275.713-.263q.437.013.712.288q.275.275.275.7q0 .425-.275.7l-3.6 3.6q-.15.15-.325.212q-.175.063-.375.063ZM6 20q-.825 0-1.412-.587Q4 18.825 4 18v-2q0-.425.287-.713Q4.575 15 5 15t.713.287Q6 15.575 6 16v2h12v-2q0-.425.288-.713Q18.575 15 19 15t.712.287Q20 15.575 20 16v2q0 .825-.587 1.413Q18.825 20 18 20Z"},null,-1),it=[ot];function rt(e,t){return R(),M("svg",st,it)}const lt={name:"material-symbols-download-rounded",render:rt},ct={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ut=_("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm-80 600c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm224 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"},null,-1),dt=[ut];function pt(e,t){return R(),M("svg",ct,dt)}const ft={name:"ant-design-pause-circle-filled",render:pt};let he=!1;async function mt(){const e=await _e.cookies.get({url:"https://www.linkedin.com",name:"JSESSIONID"});if(!e){he=!1;return}const t=e.value.replace(/"/g,"");await _e.storage.local.set({csrftoken:t}),he=!0}const gt=()=>he,Y="https://www.linkedin.com/";async function _t(e,t,a={}){const{csrftoken:o}=await _e.storage.local.get("csrftoken");let l={method:e,mode:"cors",credentials:"include",headers:{"csrf-token":o,"x-restli-protocol-version":"2.0.0",Accept:"application/vnd.linkedin.normalized+json+2.1"}};Object.keys(a).length>0&&(e==="get"?t+="?"+Object.entries(a).map(([d,i])=>`${d}=${i}`).join("&"):l.body=new URLSearchParams(a).toString());const c=await fetch(t,l);if(c.status===200)return await c.json();switch(c.status){case 403:throw new Error("403 forbidden error");case 429:throw new Error("429 too many requests");case 400:throw new Error("400 error");case 301:case 302:throw new Error("Login again");default:throw new Error("LinkedIn error")}}const X=(e,t={})=>_t("get",e,t);let me=f(!0);function vt(){async function e(){return await mt(),me.value=gt(),me.value}return{linkedInReady:me,boot:e}}function Re(e){return encodeURIComponent(e).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16))}const ht=e=>ye(e)?e.split("/")[4]:e,ye=e=>e.includes(".linkedin.com/company/"),Pe=e=>e.includes(".linkedin.com/in/"),yt=e=>Pe(e)?e.split("/")[4]:e,we=e=>e.includes(".linkedin.com/groups/"),wt=e=>we(e)?e.split("/")[4]:e;function bt(e){var o;let t="";const a=e.vectorImage||e.image||e.picture;if(a){const{rootUrl:l,artifacts:c}=a,d=Math.max(...c.map(i=>i.width),0);d>0&&(t=`${l}${((o=c.find(i=>i.width==d))==null?void 0:o.fileIdentifyingUrlPathSegment)||""}`)}return t}async function kt(e,t={},a=10){var x,m,p;const o=t.end_cursor||0,l=`count:${a},start:${o},moduleKey:ORGANIZATION_MEMBER_FEED_DESKTOP,organizationalPageUrn:${Re(e.replace("urn:li:fs_normalized_company","urn:li:fsd_organizationalPage"))}`,c=Y+`voyager/api/graphql?variables=(${l})&queryId=voyagerFeedDashOrganizationalPageUpdates.ed501d8d82e87537e4cfacf902c58559`,{included:d,data:i}=await X(c),s=(x=i==null?void 0:i.data)==null?void 0:x.feedDashOrganizationalPageUpdatesByOrganizationalPageRelevanceFeed,n=(s==null?void 0:s["*elements"])||[],k=(m=s==null?void 0:s.metadata)==null?void 0:m.paginationToken,g=((p=s==null?void 0:s.paging)==null?void 0:p.total)||0,v=d.length>0,T=be(d,n);return{count:g,edges:T,last:{end_cursor:o+a,paginationToken:k,has_next_page:v}}}async function xt(e,t={},a=20){var m,p,u;const o=t.end_cursor||0,l=t.paginationToken?`,paginationToken:${t.paginationToken}`:"",c=`count:${a},start:${o},profileUrn:${Re(e.replace("urn:li:fs_profile","urn:li:fsd_profile"))}${l}`,d=Y+`voyager/api/graphql?variables=(${c})&queryId=voyagerFeedDashProfileUpdates.cc049925968b824f53bf19b4aeccc365`,{included:i,data:s}=await X(d),n=(m=s==null?void 0:s.data)==null?void 0:m.feedDashProfileUpdatesByMemberShareFeed,k=(n==null?void 0:n["*elements"])||[],g=(p=n==null?void 0:n.metadata)==null?void 0:p.paginationToken,v=((u=n==null?void 0:n.paging)==null?void 0:u.total)||0,T=i.length>0,x=be(i,k);return{count:v,edges:x,last:{end_cursor:o+a,paginationToken:g,has_next_page:T}}}async function Ut(e,t={},a=10){var m,p,u;const o=t.end_cursor||0,l=t.paginationToken?`,paginationToken:${t.paginationToken}`:"",c=`start:${o},count:${a},groupId:${e}${l}`,d=Y+`voyager/api/graphql?variables=(${c})&queryId=voyagerFeedDashGroupsUpdates.f2812713727ec30eb467144cf7585fbb`,{included:i,data:s}=await X(d),n=(m=s==null?void 0:s.data)==null?void 0:m.feedDashGroupsUpdatesByGroupsFeed,k=(n==null?void 0:n["*elements"])||[],g=(p=n==null?void 0:n.metadata)==null?void 0:p.paginationToken,v=((u=n==null?void 0:n.paging)==null?void 0:u.total)||0,T=i.length>0,x=be(i,k);return{count:v,edges:x,last:{end_cursor:o+a,paginationToken:g,has_next_page:T}}}function be(e=[],t=[]){var o,l,c,d,i,s,n,k,g,v,T,x,m,p,u,H,E,q,D,F,S,N,G;let a=[];for(const Q of t){const I=e.find($=>$.entityUrn==Q),O=(o=I.socialContent)==null?void 0:o.shareUrl,K=(c=(l=I.commentary)==null?void 0:l.text)==null?void 0:c.text,ie=(d=I.commentary)==null?void 0:d.numLines,re=(((s=(i=I.content)==null?void 0:i.imageComponent)==null?void 0:s.images)||[]).map($=>{var C,ke;return bt(((ke=(C=$.attributes)==null?void 0:C[0])==null?void 0:ke.detailData)||{})}).join(`
`);let Z="";const ee=(k=(n=I.content)==null?void 0:n.linkedInVideoComponent)==null?void 0:k["*videoPlayMetadata"];if(ee){const $=e.find(C=>C.entityUrn==ee);Z=(x=(T=(v=(g=$==null?void 0:$.progressiveStreams)==null?void 0:g[0])==null?void 0:v.streamingLocations)==null?void 0:T[0])==null?void 0:x.url}const te=(u=(p=(m=I.content)==null?void 0:m.documentComponent)==null?void 0:p.document)==null?void 0:u.transcribedDocumentUrl,y=(E=(H=I.actor)==null?void 0:H.name)==null?void 0:E.text,w=(D=(q=I.actor)==null?void 0:q.description)==null?void 0:D.text;let L=((S=(F=I.actor)==null?void 0:F.navigationContext)==null?void 0:S.actionTarget)||"";L=L.split("?")[0];const J=(((G=(N=I.actor)==null?void 0:N.subDescription)==null?void 0:G.text)||"").split("\u2022")[0].trim(),A=e.find($=>$.entityUrn==I["*socialDetail"]),b=e.find($=>$.entityUrn==(A==null?void 0:A["*totalSocialActivityCounts"])),le=b==null?void 0:b.liked,ce=b==null?void 0:b.numComments,ue=b==null?void 0:b.numLikes,de=b==null?void 0:b.numShares;a.push({permalink:O,text:K,numLines:ie,images:re,videoUrl:Z,documentUrl:te,likes:ue,comments:ce,shares:de,liked:le,fullName:y,subtitle:w,profileUrl:L,publishDate:J})}return a}const{addTask:Tt,getObject:It,getTask:$t,addTaskRows:Ct,updateTask:Ee,updateTaskRow:St,updateTaskTotal:qe}=ze();let P="",se=!0;function Rt(e=""){e&&(P=e,se=!1)}async function Pt(e={}){!se||(P=Ae(),await Tt({...e,id:P}))}function Et(){return!se}async function qt(){if(se)throw new Error("no need to get data from history");let e=[],t={},a=0;const o=await It(P);if(o){e=o.rows;const l=await $t(P);l&&(t=l.last,a=1)}return{list:e,last:t,page:a}}async function Dt(){await Ee(P,!0)}async function De(e,t){await Ct(P,e),await Ee(P,!1,t)}async function Ft(e,t,a=1,o=0,l=0){await De(e,t),await qe(P,a,o,l)}async function Ht(e,t=1,a=0,o=0){await St(P,e),await qe(P,t,a,o)}function Fe(e=""){return{setHistoryId:Rt,createTask:Pt,isHistoryTask:Et,getDataFromHistory:qt,setFinished:Dt,insertRows:De,insertRowsAndUpdate:Ft,updateOneRow:Ht}}const{getSetting:Lt}=Se(),{isHistoryTask:Mt,getDataFromHistory:Ot,setFinished:ge,insertRows:vn,insertRowsAndUpdate:Vt,updateOneRow:hn}=Fe(),U={pending:0,running:1,pause:2,finished:9,fail:-1};function At(){let e=f(""),t=null,a=f(U.pending),o=f(""),l=0,c=!1,d=!1,i={last:{},page:0},s={list:f([]),count:f(0)};const n=Ce(()=>s.list.value);let k=f(0);async function g(){if(t&&clearTimeout(t),e.value="",!o.value||a.value!==U.running)return;const{interval:m,pause:p}=await Lt();if(s.count.value>0&&s.list.value.length>=s.count.value){s.count.value=s.list.value.length,a.value=U.finished,await ge();return}try{const H=await(c?kt:d?Ut:xt)(r(o),i.last);if(a.value!==U.running)return;const{count:E,edges:q,last:D}=H,F=q.filter(S=>!!S);if(s.list.value=s.list.value.concat(F),i.last=D,await Vt(F,D,F.length),k.value++,i.page++,s.list.value.length<s.count.value){if(!D.has_next_page){s.count.value=s.list.value.length,a.value=U.finished,await ge();return}let S=Ne(m[0]*1e3,m[1]*1e3);if(p.num&&i.page%p.num===0&&(S=p.wait*6e4),a.value!==U.running)return;t=setTimeout(g,S)}else s.list.value.length>s.count.value&&(s.list.value=s.list.value.slice(0,s.count.value)),a.value=U.finished,await ge()}catch(u){console.error(u),e.value+=`Error: ${u.message}`,a.value=U.pause}}async function v(m,p,u,H){if(o.value=r(m),c=p,d=u,l=r(H),s.count.value=l,a.value=U.running,Mt())try{const{list:E,last:q,page:D}=await Ot();s.list.value=E,i.last=q,i.page=D}catch(E){e.value=E.message,a.value=U.fail}ve(g)}function T(){a.value=U.pause,t&&clearTimeout(t),e.value=""}function x(){a.value=U.running,ve(g)}return{fetchErrorMsg:e,shortcode:o,params:i,result:s,rows:n,start:v,pause:T,resume:x,status:a,FETCH_STATUS:U}}async function zt(e){const{data:t,included:a}=await X(Y+`voyager/api/identity/profiles/${e}/profileView`);return t["*profile"]}async function Nt(e){var a;const{data:t}=await X(Y+`voyager/api/organization/companies?q=universalName&universalName=${e}`);return(a=t==null?void 0:t["*elements"])==null?void 0:a[0]}const{setHistoryId:Bt,createTask:jt}=Fe();function Gt(){let e=f(""),t=f(!1),a=f(!1),o=f(0),l=f(""),c=f(!1),d=f("");async function i(){if(!!e.value){t.value?e.value=await Nt(e.value):a.value||(e.value=await zt(e.value));try{jt({text:l.value,count:o.value}),c.value=!0;return}catch{}c.value=!0}}function s(){let{url:n,cnt:k,i:g}=Be();if(!n){d.value="Please enter a profile url or company url.";return}if(n=decodeURIComponent(n),!ye(n)&&!Pe(n)&&!we(n)){d.value="Please enter a valid profile url, group url or company url.";return}t.value=ye(n),a.value=we(n),e.value=t.value?ht(n):a.value?wt(n):yt(n),o.value=parseInt(k),l.value=n,Bt(g)}return{id:e,rawUrl:l,limit:o,isCompany:t,isGroup:a,loadErrorMsg:d,prepare:i,ready:c,loadParams:s}}const Qt={class:"flex flex-col items-center justify-center w-screen h-screen"},Kt=_("div",{class:"absolute z-0 inset-0 overflow-hidden"},null,-1),Zt=_("div",{class:"absolute z-1 inset-0",style:{background:"rgba(135, 118, 243, 0.46)","background-blend-mode":"darken","backdrop-filter":"blur(12px)"}},null,-1),Jt={class:"flex flex-col items-center absolute z-3"},Wt={class:"max-w-480px"},Yt={class:"w-500px shadow-md rounded-md overflow-hidden",style:{}},Xt={class:"bg-white p-20px grid grid-cols-1 gap-10px"},en={class:"flex gap-10px"},tn=["href"],nn={class:"flex items-center gap-10px"},an={class:"flex items-center justify-center"},sn={class:"anticon"},on={key:0,class:"flex flex-col items-center justify-center"},rn=["src"],ln={class:"mt-3 font-semibold"},cn={class:"text-gray-300/50 my-15px text-shadow-sm"},un=_("b",null,"Unlimited",-1),dn=Te({__name:"Index",setup(e){const{getSetting:t,onSettingChanged:a,removeSettingEvent:o}=Se(),l=je(),{loadErrorMsg:c,id:d,rawUrl:i,limit:s,isCompany:n,isGroup:k,ready:g,prepare:v,loadParams:T}=Gt(),{fetchErrorMsg:x,result:m,rows:p,start:u,pause:H,resume:E,status:q}=At(),{download:D}=We();let F=f("csv");const{isPro:S,login:N}=Ge();pe(q,async y=>{if(y!=U.finished)return;const{auto_download:w}=await t();!w||(await N(),S.value&&K())});let G=f(0);pe(p,async(y,w)=>{const L=y.length;if(L<Ue||L<=w.length)return;const{auto_download:J,auto_split_download:A}=await t();if(!J||!A||(await N(),!S.value))return;let b=parseInt(L/Ue);b>G.value&&(G.value=b,K())});const Q=f(!1);pe(x,y=>Q.value=!!y);const I=Ce(()=>parseInt(p.value.length/m.count.value*100));let O=f(!1);async function K(){if(await N(),p.value.length>ne&&!S.value){O.value=!0;return}Z(p.value)}function ie(){O.value=!1;const{emit:y}=$e();y("popup",{name:"Pro"})}function re(){Z(p.value.slice(0,ne))}function Z(y=[]){const w=`LI_POSTS_${d.value}_${y.length}`;D(w,y)}let{boot:ee}=vt();function te({data:y}){F.value=y.export_type}return Qe(async()=>{const y=await t();if(F.value=y.export_type,a(te),!await ee()){c.value="Please login LinkedIn first.";return}T(),ve(async()=>{await v(),g.value&&u(r(d),r(n),r(k),r(s))})}),Ie(()=>{o(te)}),(y,w)=>{const L=z("a-alert"),J=Ze,A=z("a-progress"),b=ft,le=Je,ce=lt,ue=z("a-button"),de=z("a-spin"),$=z("a-modal");return R(),M(ae,null,[_("div",Qt,[Kt,Zt,_("div",Jt,[_("div",Wt,[Q.value?(R(),xe(L,{key:0,message:r(x),type:"warning","show-icon":"",banner:"",closable:"",onClose:w[0]||(w[0]=C=>Q.value=!1)},null,8,["message"])):fe("",!0)]),_("div",Yt,[h(J,{mode:"popup"}),_("div",Xt,[r(g)?(R(),M(ae,{key:0},[_("div",en,[W(" Link: "),_("a",{href:r(i),target:"_blank"},B(r(i)),9,tn)]),_("div",nn,[h(A,{percent:r(I)},null,8,["percent"]),r(q)==r(U).running?(R(),M("div",{key:0,onClick:w[1]||(w[1]=(...C)=>r(H)&&r(H)(...C)),class:"h-16px w-16px cursor-pointer text-red-500"},[h(b)])):fe("",!0),r(q)==r(U).pause?(R(),M("div",{key:1,onClick:w[2]||(w[2]=(...C)=>r(E)&&r(E)(...C)),class:"h-16px w-16px cursor-pointer text-blue-500"},[h(le)])):fe("",!0)]),_("div",an,[h(ue,{onClick:K,disabled:r(p).length<=0,type:"primary"},{icon:V(()=>[_("span",sn,[h(ce)])]),default:V(()=>[W(" Download ("+B(r(p).length)+") to "+B(r(F).toUpperCase()),1)]),_:1},8,["disabled"])])],64)):(R(),M(ae,{key:1},[r(c)?(R(),M("div",on,[_("img",{src:r(Ke)("/assets/icn-error.png"),class:"w-300px"},null,8,rn),_("div",ln,B(r(c)),1)])):(R(),xe(de,{key:1}))],64))])]),_("div",cn,"v"+B(r(l)),1)])]),h($,{visible:r(O),"onUpdate:visible":w[3]||(w[3]=C=>j(O)?O.value=C:O=C),title:"",okText:"Upgrade now",cancelText:`Download ${r(ne)} rows`,onOk:ie,onCancel:re,closable:!1,maskClosable:!1,keyboard:!1},{default:V(()=>[W(" The maximum number of export for a free account is "),_("b",null,B(r(ne)),1),W(". you can upgrade to the Pro version, whose maximum number is "),un,W(". ")]),_:1},8,["visible","cancelText"])],64)}}}),pn=[{path:"/",name:"Index",component:dn}],fn=Ye({history:Xe(),routes:pn});const mn=et(),oe=tt(at);oe.use(fn);oe.use(mn);oe.use(nt);oe.mount("#app");
