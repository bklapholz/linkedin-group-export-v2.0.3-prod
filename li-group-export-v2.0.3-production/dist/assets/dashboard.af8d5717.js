import"./modulepreload-polyfill.c7c6310f.js";import{d as xe,i as f,J as Te,o as H,c as F,a as g,l as O,u as o,p as j,F as ie,K as Ee,r as z,B as qe,x as Oe,y as De,v as Fe,z as je,A as Ae,b as w,L as ve,M as Ge,N as Be,h as Qe,j as Y,O as Z,P as ye,m as Ue,n as ze,Q as We,g as Ke,R as Je,w as de,k as Ze,s as be,S as fe,e as W,t as K,q as Xe,T as oe,U as ke,_ as Ye,V as et,X as tt,C as nt,E as at,G as st,H as ot,I as it}from"./__uno.6d0dca22.js";const lt=xe({__name:"App",setup(e){let{on:n,clear:t}=Ee(),s=f(!1),i=f(!1),c=f(!1),l=f(!1),d=f(!1),a=f(!1);return n("popup",({name:y})=>{switch(y){case"History":s.value=!0;break;case"Setting":i.value=!0;break;case"EmailFinder":c.value=!0;break;case"Help":l.value=!0;break;case"Tool":d.value=!0;break;case"Pro":a.value=!0;break}}),Te(()=>{t()}),(y,v)=>{const $=z("router-view"),P=qe,x=z("a-modal"),Q=Oe,T=De,b=Fe,E=je,k=Ae;return H(),F(ie,null,[g($),g(x,{visible:o(s),"onUpdate:visible":v[0]||(v[0]=u=>j(s)?s.value=u:s=u),title:"History",footer:null,destroyOnClose:"",bodyStyle:{padding:0}},{default:O(()=>[g(P)]),_:1},8,["visible"]),g(x,{visible:o(i),"onUpdate:visible":v[1]||(v[1]=u=>j(i)?i.value=u:i=u),title:"Settings",footer:null,destroyOnClose:""},{default:O(()=>[g(Q)]),_:1},8,["visible"]),g(x,{visible:o(c),"onUpdate:visible":v[2]||(v[2]=u=>j(c)?c.value=u:c=u),title:"Email Finder",footer:null,destroyOnClose:""},{default:O(()=>[g(T)]),_:1},8,["visible"]),g(x,{visible:o(l),"onUpdate:visible":v[3]||(v[3]=u=>j(l)?l.value=u:l=u),title:"Help",footer:null},{default:O(()=>[g(b)]),_:1},8,["visible"]),g(x,{visible:o(d),"onUpdate:visible":v[4]||(v[4]=u=>j(d)?d.value=u:d=u),title:"More Tools",footer:null},{default:O(()=>[g(E)]),_:1},8,["visible"]),g(x,{visible:o(a),"onUpdate:visible":v[5]||(v[5]=u=>j(a)?a.value=u:a=u),title:"VIP",footer:null},{default:O(()=>[g(k)]),_:1},8,["visible"])],64)}}}),rt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ut=w("path",{fill:"currentColor",d:"M12 15.575q-.2 0-.375-.063q-.175-.062-.325-.212l-3.6-3.6q-.275-.275-.275-.7q0-.425.275-.7q.275-.275.712-.288q.438-.012.713.263L11 12.15V5q0-.425.288-.713Q11.575 4 12 4t.713.287Q13 4.575 13 5v7.15l1.875-1.875q.275-.275.713-.263q.437.013.712.288q.275.275.275.7q0 .425-.275.7l-3.6 3.6q-.15.15-.325.212q-.175.063-.375.063ZM6 20q-.825 0-1.412-.587Q4 18.825 4 18v-2q0-.425.287-.713Q4.575 15 5 15t.713.287Q6 15.575 6 16v2h12v-2q0-.425.288-.713Q18.575 15 19 15t.712.287Q20 15.575 20 16v2q0 .825-.587 1.413Q18.825 20 18 20Z"},null,-1),ct=[ut];function dt(e,n){return H(),F("svg",rt,ct)}const ft={name:"material-symbols-download-rounded",render:dt},pt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},mt=w("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm-80 600c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm224 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"},null,-1),vt=[mt];function _t(e,n){return H(),F("svg",pt,vt)}const gt={name:"ant-design-pause-circle-filled",render:_t};let _e=!1;async function ht(){const e=await ve.cookies.get({url:"https://www.linkedin.com",name:"JSESSIONID"});if(!e){_e=!1;return}const n=e.value.replace(/"/g,"");await ve.storage.local.set({csrftoken:n}),_e=!0}const wt=()=>_e,ge="https://www.linkedin.com/";async function yt(e,n,t={}){const{csrftoken:s}=await ve.storage.local.get("csrftoken");let i={method:e,mode:"cors",credentials:"include",headers:{"csrf-token":s,"x-restli-protocol-version":"2.0.0",Accept:"application/vnd.linkedin.normalized+json+2.1"}};Object.keys(t).length>0&&(e==="get"?n+="?"+Object.entries(t).map(([l,d])=>`${l}=${d}`).join("&"):i.body=new URLSearchParams(t).toString());const c=await fetch(n,i);if(c.status===200)return await c.json();switch(c.status){case 403:throw new Error("403 forbidden error");case 429:throw new Error("429 too many requests");case 400:throw new Error("400 error");case 301:case 302:throw new Error("Login again");default:throw new Error("LinkedIn error")}}const he=(e,n={})=>yt("get",e,n);function J(e,n){return e.find(t=>t.entityUrn==n)}async function bt(e,n=[],t={},s=100){const i=encodeURIComponent(`urn:li:fsd_group:${e}`),c=`List(${n.join(",")})`,l=t.end_cursor||0,{data:d,included:a}=await he(ge+"voyager/api/voyagerGroupsDashGroupMemberships",{decorationId:"com.linkedin.voyager.dash.deco.groups.GroupMembershipInMemberListPage-4",count:s,filters:"List()",groupUrn:i,membershipStatuses:c,q:"typeahead",start:l,typeaheadQuery:'""'}),{paging:{total:y}}=d;return{count:y,edges:a,last:{end_cursor:l+s,has_next_page:y>0&&a.length>0}}}const kt=e=>Ne(e)||!isNaN(e),It=e=>Ne(e)?e.split("/")[4]:e,Ne=e=>e.includes(".linkedin.com/groups/");function Re(e){var s;let n="";const t=e.vectorImage||e.image||e.picture;if(t){const{rootUrl:i,artifacts:c}=t,l=Math.max(...c.map(d=>d.width),0);l>0&&(n=`${i}${((s=c.find(d=>d.width==l))==null?void 0:s.fileIdentifyingUrlPathSegment)||""}`)}return n}let pe=f(!0);function xt(){async function e(){return await ht(),pe.value=wt(),pe.value}return{linkedInReady:pe,boot:e}}async function Tt(e){const{data:n,included:t}=await he(ge+`voyager/api/identity/profiles/${e}/networkinfo`);return n}async function Et(e){const{data:n,included:t}=await he(ge+`voyager/api/identity/profiles/${e}/profileView`);let s={};const i=J(t,n["*educationView"]);i&&i["*elements"]&&i["*elements"].length>0&&(s=J(t,i["*elements"][0]));let c={};const l=J(t,n["*positionView"]);l&&l["*elements"]&&l["*elements"].length>0&&(c=J(t,l["*elements"][0]));const d=J(t,n["*profile"]),{firstName:a,lastName:y,geoLocationName:v,geoCountryName:$,locationName:P,address:x,industryName:Q,summary:T,headline:b,student:E,birthDate:k}=d,{country:u,language:U}=d.defaultLocale,I=J(t,d["*miniProfile"]),{publicIdentifier:N,occupation:S}=I;let p=Re(I);return{publicIdentifier:N,profilePictureUrl:p,firstName:a,lastName:y,headline:b,occupation:S,summary:T,industryName:Q,geoLocationName:v,geoCountryName:$,locationName:P,country:u,language:U,address:x,student:E,birthDate:Ut(k),company:{locationName:c.locationName,geoLocationName:c.geoLocationName,companyName:c.companyName,title:c.title},school:{degreeName:s.degreeName,schoolName:s.schoolName,fieldOfStudy:s.fieldOfStudy}}}function Ut(e){if(!e)return"";let{year:n,month:t,day:s}=e;t=`${t}`.padStart(2,"0"),s=`${s}`.padStart(2,"0");let i=[];return n&&i.push(n),t&&i.push(t),s&&i.push(s),i.join("-")}const{addTask:Nt,getObject:Rt,getTask:St,addTaskRows:$t,updateTask:Se,updateTaskRow:Ct,updateTaskTotal:$e}=Be();let q="",le=!0;function Pt(e=""){e&&(q=e,le=!1)}async function Lt(e={}){!le||(q=Ge(),await Nt({...e,id:q}))}function Mt(){return!le}async function Vt(){if(le)throw new Error("no need to get data from history");let e=[],n={},t=0;const s=await Rt(q);if(s){e=s.rows;const i=await St(q);i&&(n=i.last,t=1)}return{list:e,last:n,page:t}}async function Ht(){await Se(q,!0)}async function Ce(e,n){await $t(q,e),await Se(q,!1,n)}async function qt(e,n,t=1,s=0,i=0){await Ce(e,n),await $e(q,t,s,i)}async function Ot(e,n=1,t=0,s=0){await Ct(q,e),await $e(q,n,t,s)}function Pe(e=""){return{setHistoryId:Pt,createTask:Lt,isHistoryTask:Mt,getDataFromHistory:Vt,setFinished:Ht,insertRows:Ce,insertRowsAndUpdate:qt,updateOneRow:Ot}}const{getSetting:Ie}=Ue(),{loadEnricher:Dt,enricher:Ft,enrichEmail:jt}=Qe(!0),{isHistoryTask:At,getDataFromHistory:Gt,setFinished:me,insertRows:Bt,insertRowsAndUpdate:Qt,updateOneRow:zt}=Pe(),h={pending:0,running:1,pause:2,finished:9,fail:-1};function Wt(){let e=f(""),n=null,t=f(h.pending),s=f(""),i=[],c=0,l=!1,d={last:{},page:0},a={list:f([]),count:f(0)};const y=Y(()=>a.list.value.filter(b=>b.ok));let v=f(0);async function $(){if(n&&clearTimeout(n),e.value="",!s.value||t.value!==h.running)return;const{interval:b,pause:E,bio:k,networkInfo:u}=await Ie();if((k||u||l)&&a.list.value.findIndex(I=>!I.ok)>-1){Z(P);return}if(a.count.value>0&&a.list.value.length>=a.count.value){a.count.value=a.list.value.length,t.value=h.finished,await me();return}try{const U=await bt(o(s),i,d.last),{count:I,edges:N,last:S}=U;if(a.count.value===0){if(I<=0){e.value="Please join the group first, and make sure the group is exists.",t.value=h.pause;return}a.count.value=Math.min(I,c)}const p=N.filter(m=>m.$type=="com.linkedin.voyager.dash.identity.profile.Profile").map(m=>{const C=m.profilePicture||{},D=Re(C.displayImageReferenceResolutionResult||C.displayImageWithFrameReferenceUnion||C.displayImageReference||{}),{frameType:A}=C;let M=A=="OPEN_TO_WORK",G="SELF",ee=m["*memberRelationship"];const te=N.find(r=>r.$type=="com.linkedin.voyager.dash.relationships.MemberRelationship"&&r.entityUrn==ee);if(te){const{memberRelationshipUnion:r,memberRelationship:_}=te,{noConnection:B,self:X}=r||_||{};B?G=B.memberDistance:X?G="SELF":G="DISTANCE_1"}const ne=m.entityUrn,{joinedAt:ue,status:ae}=N.find(r=>r.$type=="com.linkedin.voyager.dash.groups.GroupMembership"&&r["*profile"]==ne);return{id:m.publicIdentifier,publicIdentifier:m.publicIdentifier,firstName:m.firstName,lastName:m.lastName,headline:m.headline,profilePictureUrl:D,openToWork:M,memberStatus:ae,memberSince:ue,connectionDegree:G}}),R=!k&&!u&&!l,L=p.filter(m=>!!m).map(m=>({...m,ok:R}));if(a.list.value=a.list.value.concat(L),d.last=S,R?await Qt(L,S,L.length):await Bt(L,S),v.value++,d.page++,(k||u||l)&&a.list.value.findIndex(C=>!C.ok)>-1){Z(P);return}if(a.list.value.length<a.count.value){if(!S.has_next_page){a.count.value=a.list.value.length,t.value=h.finished,await me();return}let m=ye(b[0]*1e3,b[1]*1e3);if(E.num&&d.page%E.num===0&&(m=E.wait*6e4),t.value!==h.running)return;n=setTimeout($,m)}else a.list.value.length>a.count.value&&(a.list.value=a.list.value.slice(0,a.count.value)),t.value=h.finished,await me()}catch(U){console.error(U),e.value+=`Error: ${U.message}`,t.value=h.pause}}async function P(){var I,N,S;const b=a.list.value.findIndex(p=>!p.ok);if(b===-1){Z($);return}if(t.value!==h.running)return;const{interval:E,pause:k,bio:u,networkInfo:U}=await Ie();try{let p=a.list.value[b],R={};if(u){const D=await Et(p.publicIdentifier);R={...R,...D}}if(U){const D=await Tt(p.publicIdentifier);R={...R,...D}}if(l){let D=await jt({full_name:`${p.firstName} ${p.lastName}`,first_name:p.firstName,last_name:p.lastName,company_name:(S=(N=(I=p.user)==null?void 0:I.company)==null?void 0:N.companyName)!=null?S:"",linkedin_url:`https://www.linkedin.com/in/${p.publicIdentifier}/`});p={...p,en:D}}p={...p,user:R};const L={...p,ok:!0};a.list.value[b]=L,await zt(L,1),v.value++;let m=ye(E[0]*1e3,E[1]*1e3);if(k.num&&d.page%k.num===0&&(m=k.wait*6e4),t.value!==h.running)return;const C=Ft.value.interval*6e4;l&&(m+=C),n=setTimeout(P,m)}catch(p){console.error(p),e.value+=`Error: ${p.message}`,t.value=h.pause}}async function x(b,E,k,u){if(s.value=o(b),i=o(E),c=o(u),l=k,t.value=h.running,Dt(),At())try{const{list:U,last:I,page:N}=await Gt();a.list.value=U,d.last=I,d.page=N}catch(U){e.value=U.message,t.value=h.fail}Z($)}function Q(){t.value=h.pause,n&&clearTimeout(n),e.value=""}function T(){t.value=h.running,Z($)}return{fetchErrorMsg:e,shortcode:s,params:d,result:a,rows:y,start:x,pause:Q,resume:T,status:t,FETCH_STATUS:h}}const{setHistoryId:Kt,createTask:Jt}=Pe();function Zt(){let e=f(""),n=f([]),t=f(0),s=f(!1),i=f(""),c=f(!1),l=f("");async function d(){!e.value||(Jt({text:i.value,status:ze(n.value),enrich:s.value,count:t.value}),c.value=!0)}function a(){let{url:y,status:v,cnt:$,en:P,i:x}=We();if(!y){l.value="Please enter a group url.";return}if(y=decodeURIComponent(y),!kt(y)){l.value="Please enter a valid group url.";return}e.value=It(y),n.value=v.split("|"),t.value=parseInt($),s.value=P=="1",i.value=y,Kt(x)}return{id:e,filterStatus:n,enrich:s,limit:t,loadErrorMsg:l,prepare:d,ready:c,loadParams:a}}const Xt={class:"flex flex-col items-center justify-center w-screen h-screen"},Yt=w("div",{class:"absolute z-0 inset-0 overflow-hidden"},null,-1),en=w("div",{class:"absolute z-1 inset-0",style:{background:"rgba(135, 118, 243, 0.46)","background-blend-mode":"darken","backdrop-filter":"blur(12px)"}},null,-1),tn={class:"flex flex-col items-center absolute z-3"},nn={class:"max-w-480px"},an={class:"w-500px shadow-md rounded-md overflow-hidden",style:{}},sn={class:"bg-white p-20px grid grid-cols-1 gap-10px"},on={class:"flex gap-10px"},ln=["href"],rn={class:"flex items-center gap-10px"},un={class:"flex items-center justify-center"},cn={class:"anticon"},dn={key:0,class:"flex flex-col items-center justify-center"},fn=["src"],pn={class:"mt-3 font-semibold"},mn={class:"text-gray-300/50 my-15px text-shadow-sm"},vn=w("b",null,"Unlimited",-1),_n=xe({__name:"Index",setup(e){const{getSetting:n,onSettingChanged:t,removeSettingEvent:s}=Ue(),i=Ke(),{loadErrorMsg:c,id:l,filterStatus:d,enrich:a,limit:y,ready:v,prepare:$,loadParams:P}=Zt(),{fetchErrorMsg:x,result:Q,rows:T,start:b,pause:E,resume:k,status:u}=Wt(),{download:U}=tt();let I=f("csv"),N=f(!1),S=f(!1);const p=Y(()=>`https://www.linkedin.com/groups/${l.value}/`),{isPro:R,login:L}=Je();de(u,async r=>{if(r!=h.finished)return;const{auto_download:_}=await n();!_||(await L(),R.value&&G())});let m=f(0);de(T,async(r,_)=>{const B=r.length;if(B<ke||B<=_.length)return;const{auto_download:X,auto_split_download:ce}=await n();if(!X||!ce||(await L(),!R.value))return;let se=parseInt(B/ke);se>m.value&&(m.value=se,G())});const C=f(!1);de(x,r=>C.value=!!r);const D=Y(()=>parseInt(T.value.length/Q.count.value*100));let A=f(!1),M=f(!1);async function G(){if(await L(),(N.value||S.value)&&!R.value){M.value=!0;return}if(a.value&&!R.value){M.value=!0;return}if(T.value.length>oe&&!R.value){A.value=!0;return}ne(T.value)}function ee(){A.value=!1;const{emit:r}=Ee();r("popup",{name:"Pro"})}function te(){ne(T.value.slice(0,oe))}function ne(r=[]){const _=`LI_GROUP_MEMBERS_${l.value}_${r.length}`;U(_,r)}Y(()=>T.value.filter(r=>r.user&&r.user.public_email)),Y(()=>T.value.filter(r=>r.user&&r.user.contact_phone_number));let{boot:ue}=xt();function ae({data:r}){I.value=r.export_type,N.value=r.bio,S.value=r.networkInfo}return Ze(async()=>{const r=await n();if(I.value=r.export_type,N.value=r.bio,S.value=r.networkInfo,t(ae),!await ue()){c.value="Please login LinkedIn first.";return}P(),Z(async()=>{await $(),v.value&&b(o(l),o(d),o(a),o(y))})}),Te(()=>{s(ae)}),(r,_)=>{const B=z("a-alert"),X=Ye,ce=z("a-progress"),se=gt,Le=et,Me=ft,Ve=z("a-button"),He=z("a-spin"),we=z("a-modal");return H(),F(ie,null,[w("div",Xt,[Yt,en,w("div",tn,[w("div",nn,[C.value?(H(),be(B,{key:0,message:o(x),type:"warning","show-icon":"",banner:"",closable:"",onClose:_[0]||(_[0]=V=>C.value=!1)},null,8,["message"])):fe("",!0)]),w("div",an,[g(X,{mode:"popup"}),w("div",sn,[o(v)?(H(),F(ie,{key:0},[w("div",on,[W(" Group Link: "),w("a",{href:o(p),target:"_blank"},K(o(p)),9,ln)]),w("div",rn,[g(ce,{percent:o(D)},null,8,["percent"]),o(u)==o(h).running?(H(),F("div",{key:0,onClick:_[1]||(_[1]=(...V)=>o(E)&&o(E)(...V)),class:"h-16px w-16px cursor-pointer text-red-500"},[g(se)])):fe("",!0),o(u)==o(h).pause?(H(),F("div",{key:1,onClick:_[2]||(_[2]=(...V)=>o(k)&&o(k)(...V)),class:"h-16px w-16px cursor-pointer text-blue-500"},[g(Le)])):fe("",!0)]),w("div",un,[g(Ve,{onClick:G,disabled:o(T).length<=0,type:"primary"},{icon:O(()=>[w("span",cn,[g(Me)])]),default:O(()=>[W(" Download ("+K(o(T).length)+") to "+K(o(I).toUpperCase()),1)]),_:1},8,["disabled"])])],64)):(H(),F(ie,{key:1},[o(c)?(H(),F("div",dn,[w("img",{src:o(Xe)("/assets/icn-error.png"),class:"w-300px"},null,8,fn),w("div",pn,K(o(c)),1)])):(H(),be(He,{key:1}))],64))])]),w("div",mn,"v"+K(o(i)),1)])]),g(we,{visible:o(A),"onUpdate:visible":_[3]||(_[3]=V=>j(A)?A.value=V:A=V),title:"",okText:"Upgrade now",cancelText:`Download ${o(oe)} rows`,onOk:ee,onCancel:te,closable:!1,maskClosable:!1,keyboard:!1},{default:O(()=>[W(" The maximum number of export for a free account is "),w("b",null,K(o(oe)),1),W(". you can upgrade to the Pro version, whose maximum number is "),vn,W(". ")]),_:1},8,["visible","cancelText"]),g(we,{visible:o(M),"onUpdate:visible":_[4]||(_[4]=V=>j(M)?M.value=V:M=V),title:"",okText:"Upgrade now",cancelText:"Cancel",onOk:ee,onCancel:_[5]||(_[5]=V=>j(M)?M.value=!1:M=!1),closable:!1,maskClosable:!1,keyboard:!1},{default:O(()=>[W(" The feature of extracting user profile and Enrich Email is only available for Pro version. you can upgrade to the Pro version. ")]),_:1},8,["visible"])],64)}}}),gn=[{path:"/",name:"Index",component:_n}],hn=nt({history:at(),routes:gn});const wn=st(),re=ot(lt);re.use(hn);re.use(wn);re.use(it);re.mount("#app");
